<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: h5c3.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: h5c3.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/** 
 * @preserve H5C3 Framework v{VERSION}-{DISTRO}
 */
/*global H5C3:true, h5c3:true, gamecore:true, $DOC:true, $CHK:true, $GEI:true, $VLD:true, $CNT:true, $CTX:true, $GEN:true, $GEC:true, $ESA:true, $EGA:true, $AEA:true, $AET:true, $PUW:true, $AST:true */
/*jslint indent: 4, maxerr: 20, passfail: false, white: true, browser: true, sub: true, nomen: true, plusplus: true, unparam: true */
"use strict";

/**
 * Some shortcut tools for working with the DOM. These actually help save overall file size.
 */

/**
 * @function $DOC
 * @returns {document} Returns the document
 * &lt;p>
 * Alias for document - only shortens by 3 characters, but to be standard,
 * plus it adds up when you have 500 calls to document!&lt;/p>
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * $DOC().addEventListener('webkitfullscreenchange', h5c3.bootstrap._onFullscreenChange);
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$DOC = function() { return window.document; };

/**
 * @function $GEI
 * @param {string} id The ID of the element you want returned
 * @returns {element} Returns the element uniquely identified by its id identifier.
 * &lt;p>
 * Alias for document.getElementByID()
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * var element = $GEI("myDIV");
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$GEI = function ($id) { return $DOC().getElementById($id); };

/**
 * @function $CNT
 * @param {string|element} $element The name of an element or the actual element to append to
 * @returns {element} returns the element
 * &lt;p>
 * Checks node parameter. Returns an element no mater if the element is passed in or the sname of an element.
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * var $el = $CNT($element);
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$CNT = function ($element) { var $result; if (typeof $element === "string") { $result = $GEI($element); } else { $result = $element; } return $result; };

/**
 * @function $CTX
 * @param {string|canvas} $element The name of an canvas or the actual canvas
 * @returns {context} Returns the 2D drawing context.
 * &lt;p>
 * Alias for document.getElementByID(canvas).getContext("2d");
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * var myCTX = $CTX("myCanvas");
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$CTX = function ($element) { return $CNT($element).getContext("2d"); };

/**
 * @function $GEN
 * @param {string} $name The name of the elements you want returned
 * @returns {collection} Returns the collection of elements with the given name
 * &lt;p>
 * Alias for document.getElementsByName()
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * var elements = $GEN("DIV");
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$GEN = function ($name) { return $DOC().getElementsByName($name); };

/**
 * @function $GEC
 * @param {string} $class The class name of the elements you want returned
 * @returns {collection} Returns the collection of elements with the given classname
 * &lt;p>
 * Alias for document.getElementsByClass()
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * var elements = $GEN("red");
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$GEC = function ($class) { return $DOC().getElementsByClass($class); };

/**
 * @function $ESA
 * @param {string|element} $element The name of an element or the actual element
 * @param {string} name of the attribute you want to set
 * @param {string|number} value to assign
 * &lt;p>
 * Alias for element.setAttribute()
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * $ESA("button","color","red");
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$ESA = function ($element, $name, $value) { $CNT($element).setAttribute($name, $value); };

/**
 * @function $EGA
 * @param {string|element} $element The name of an element or the actual element
 * @param {string} name of the attrinbute you want to get
 * &lt;p>
 * Alias for element.getAttribute()
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * var btnColor = $EGA("button","color");
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$EGA = function ($element, $name) { $CNT($element).getAttribute($name); };

/**
 * @function $AEA
 * @param {string|element} $element The name of an element or the actual element
 * @param {string} $tag element to insert
 * @param {string} $id ID of the new element
 * @param {string} $htm HTML to insert into new element
 * &lt;p>
 * Inserts a new element before a given element
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * $AEA('someElementID','DIV','newDivID','This is inner HTML');
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$AEA = function ($element, $tag, $id, $htm) {
	var $el = $CNT($element),
		$ne = $DOC().createElement($tag);
	if ($id) {
		$ne.id = $id;
	}
	if ($htm) {
		$ne.innerHTML = $htm;
	}
	$el.parentNode.insertBefore($ne, $element);
	return $id;
};

/**
 * @function $AET
 * @param {string|element} $element The name of an element or the actual element
 * @param {string} $tag element to insert
 * @param {string} $id ID of the new element
 * @param {string} htm HTML to insert into new element
 * @returns {element} returns the element jsut created & appended.
 * &lt;p>
 * Inserts a new element into a given element
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * $AET('someElementID','DIV','newDivID','This is inner HTML');
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$AET = function ($element, $tag, $id, $htm) {
	var $el = $CNT($element),
		$ne = $DOC().createElement($tag);
	if ($id) {
		$ne.id = $id;
	}
	if ($htm) {
		$ne.innerHTML = $htm;
	}
	$el.appendChild($ne);
	return $ne;
};

/**
 * @function $PUW
 * @param {string} $url The URL of the document to load in the new window
 * @param {string} $title The title to use for the new window
 * @param {boolean} $fullscreen True to open in fullscreen mode, false to use $width & $height and center
 * @param {number} $width The desired width of the new window
 * @param {number} $height The desired height of the new window
 * @returns {window} returns the new window
 * &lt;p>
 * Smart Popup Window, Either Fullscreen or Centered.
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * var $myWindow = $PUW('index.html','My Window',false,640,480);
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$PUW = function ($url, $title, $fullscreen, $width, $height) {
	var $popup,
		$left = (window.screen.availWidth / 2) - ($width / 2),
		$top = (window.screen.availHeight / 2) - ($height / 2);
	if ($fullscreen === true) {
		$popup = window.open($url, $title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no');
		$popup.moveTo(0, 0);
		$popup.resizeTo(window.screen.availWidth, window.screen.availHeight);
	} else {
		$popup = window.open($url, $title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=' + $width + ', height=' + $height + ', top=' + $top + ', left=' + $left);
	}
	if (!$popup || $popup.closed || $popup.closed === 'undefined' || $popup.screenX === 0) {
		window.alert('Please change your popup settings for this domain.');
	}
	return $popup;
};

/**
 * @function $VLD
 * @param {*} p A value
 * @returns {Boolean} true if the value is not undefined and not null
 * &lt;p>
 * Check if a value is valid (not null or undefined)
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * if !($VLD(foo)) { someFunction(); }
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$VLD = function (p) { return !(p === null || p === 'undefined' || p === undefined); };

/**
 * @function $CHK
 * @param {*} p Parameter to check
 * @param {*} def Default value to return if p is either null or undefined
 * @returns {*} p if valid, otherwise def (default)
 * &lt;p>
 * Checks if a param is valid (null or undefined) in which case the default value will be returned
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * if ($CHK(foo,"bar")) { someFunction(); }
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$CHK = function (p, def) { var $result; if (!$VLD(p)) { $result = def; } else { $result = p; } return $result; };

/**
 * @function $AST
 * @param {Boolean} test A boolean result test
 * @param {String} error A string to throw with the exception
 * &lt;p>
 * Tests a boolean evaluation and throws an exception with the error string. (Assert)
 * &lt;/p>
 * Example:
 * &lt;pre>&lt;code>
 * $AST(foo,'BOOYA!');
 * &lt;/code>&lt;/pre>
 * &lt;/p>
 */
window.$AST = function (test, error) { if (!test) { throw error; } };
 
 
/**
 * @class H5C3
 * @desc
 * &lt;p>
 * Primary object in which the entire engine and framework reside. This is for the production
 * version of the Framework.
 * &lt;/p> 
 */
window.H5C3 = gamecore.Base('H5C3', {
	/**
	 * Holds the name of this framework
	 * @property {string} NAME
	 * @protected
	 * @memberof H5C3
	 */
	NAME: 'H5C3 Framework',
	/**
	 * Holds the current version of the framework
	 * @property {string} VERSION 
	 * @protected
	 * @memberof H5C3
	 */
	VERSION: '{VERSION}',
	/**
	 * Holds the distrobution tag of the framework
	 * @property {string} DISTRO 
	 * @protected
	 * @memberof H5C3
	 */
	DISTRO: '{DISTRO}',
	/**
	 * URL to where the H5C3 Framework root folder
	 * @property {string} LOCATION 
	 * @protected
	 * @memberof H5C3
	 */
	LOCATION: 'http://www.i2tmlabs.com/h5c3/',
	/**
	 * Contants used for defining device orientation.
	 * @property {object} ORIENTATION
	 * @static
	 * @memberof H5C3
	 */
	ORIENTATION: {
		AUTO: 0x0000,
		LANDSCAPE: 0x0001,
		PORTRAIT: 0x0002
	}
}, {
	/**
	 * @memberof H5C3
	 * @property {Array} Container for all plugins components.
	 * @public
	 */
	plugin: null,
	/**
	 * @memberof H5C3
	 * @property {Array} Container for all loaded Systems.
	 * @public
	 */
	systems: null,
	/**
	 * @memberof H5C3
	 * @property {Array} Container for all loaded components.
	 * @public
	 */
	components: null,
	/**
	 * @memberof H5C3
	 * @property {EntityFactory} Manager for all Entity objects.
	 * @public
	 */
	entityFactory: null,
	/**
	 * @memberof H5C3
	 * @property {SoundFactory} Manager for all Sound objects.
	 * @public
	 */
	soundFactory: null,
	/**
	 * @memberof H5C3
	 * @property {SceneFactory} Manager for all Scene objects.
	 * @public
	 */
	sceneFactory: null,
	/**
	 * @memberof H5C3
	 * @property {boolean} devMode True if we are debugging, False otherwise
	 * @public
	 */
	devMode: null,

	/**
	 * Initialization
	 *
	 * @memberof H5C3
	 * @method
	 * @public
	 */
	init: function() {
		this._super();
		if (H5C3.DISTRO==="Developer") { this.devMode = true; } else { this.devMode = false; }
	},
	
	/**
	 * Returns the Frameworks current Name
	 *
	 * @memberof H5C3
	 * @method
	 * @public
	 * @returns {string} Full name and version of the framework.
	 */
	tag: function() { return H5C3.NAME+' v'+H5C3.VERSION+'-'+H5C3.DISTRO; },
	
	/**
	 * Called via the onload event to start execution
	 *
	 * @memberof H5C3
	 * @method
	 * @public
	 */
	run: function() { this.bootstrap = new h5c3.bootstrap(); }		
});

/**
 * @static
 * @desc
 * &lt;p>
 * Primary object used by framework. All class definitions and child object reside within this object.
 * &lt;/p>
 */
window.h5c3 = new H5C3();

/**
 * @class h5c3.Base
 * @augments gamecore.Base
 * A base class providing logging, object counting and unique object id's
 * Examples:
 *
 * Unique ID and total objects:
 * &lt;pre>&lt;code>
 * var Fighter = h5c3.Base.extend('Fighter', {}, {});
 * var fighter1 = new Fighter();
 * var fighter2 = new Fighter();
 * fighter1.uniqueId;    // -> 'Fighter:0'
 * fighter2.uniqueId;    // -> 'Fighter:1'
 * Fighter.totalObjects; // -> 2
 * &lt;/code>&lt;/pre>
 *
 * Logging: (log, info, warn, error, debug)
 * &lt;pre>&lt;code>
 * fighter1.warn('oops'); // == console.log('Fighter:0 [WARN] oops');
 * &lt;/code>&lt;/pre>
 */
window.h5c3.Base = gamecore.Base('h5c3.Base', /** @lends h5c3.Base */
	{},	/** @lends h5c3.Base.prototype */
	{
		/**
		 * Used for sending debugging messages to either console, debugger or both.
		 *
		 * @function
		 * @public
		 * @param {string] message
		 */
		debug: function (message) {
			var log = $GEI("waConsoleLog");

			if ($VLD(log)) {
				log.value += this.uniqueId + '->' + message + '\n';
				log.scrollTop = log.scrollHeight;
			}
			window.console.log(this.uniqueId + '->' + message);
		}
	});

/**
 * @class h5c3.Hashtable
 * @augments gamecore.Hashtable
 * @desc Interface function gameCore.jhashtable...JavaScript implementation of a hash table. It creates a single constructor function called Hashtable in the global scope.
 * Example:
 * &lt;code>
 *     var map = new h5c3.Hashtable();
 *     map.put('test1', obj);
 *     var obj = map.get('test1');
 * &lt;/code>
 */
h5c3.Hashtable = gamecore.Hashtable;
	
/**
 * @class h5c3.Pool
 * @augments gamecore.Pool
 * @desc 
 * Easy (high-performance) object pooling
 *
 * A pool of objects for use in situations where you want to minimize object life cycling (and
 * subsequently garbage collection). It also serves as a very high speed, minimal overhead
 * collection for small numbers of objects.
 * &lt;p>
 * This class maintains mutual an array of objects which are free. If you wish to maintain a list of both
 * free and used then see the gamecore.DualPool.
 * &lt;p>
 * Pools are managed by class type, and will auto-expand as required. You can create a custom initial pool
 * size by deriving from the Pool class and statically overriding INITIAL_POOL_SIZE.
 * &lt;p>
 * Keep in mind that objects that are pooled are not constructed; they are "reset" when handed out.
 * You need to "acquire" one and then reset its state, usually via a static create factory method.
 * &lt;p>
 * Example:
 * &lt;pre>&lt;code>
 * Point = h5c3.Pooled('Point',
 * {
 *   // Static constructor
 *   create:function (x, y)
 *   {
 *      var n = this._super();
 *      n.x = x;
 *      n.y = y;
 *      return n;
 *   }
 * },
 * {
 *    x:0, y:0,   // instance
 *
 *    init: function(x, y)
 *    {
 *       this.x = x;
 *       this.y = y;
 *    }
 * }
 * &lt;/code>&lt;/pre>
 * To then access the object from the pool, use create, instead of new. Then release it.
 * &lt;pre>&lt;code>
 * var p = Point.create(100, 100);
 * // ... do something
 * p.release();
 * &lt;/code>&lt;/pre>
 *
 */
h5c3.Pool = gamecore.Pool.extend('h5c3.Pool',
	/** @lends h5c3.Pool */
	{},
	/** @lends h5c3.Pool.prototype */
	{});

/**
 * @class h5c3.Pooled
 * @augments h5c3.Pooled
 * 
 * @desc Used as a base class for objects which are life cycle managed in an object pool.
 */
h5c3.Pooled = gamecore.Pooled.extend('h5c3.Pooled',
	/** @lends h5c3.Pooled */
	{},
	/** @lends h5c3.Pooled.prototype */
	{});

/**
 * @class h5c3.LinkedList 
 * @augments gamecore.LinkedList
 *
 * gamecore.LinkedList
 */
h5c3.LinkedList = gamecore.LinkedList.extend('h5c3.LinkedList',
	/** @lends h5c3.LinkedList */
	{},
	/** @lends h5c3.LinkedList.prototype */
	{});

/**
 * @class h5c3.LinkedListNode
 * @augments gamecore.LinkedListNode
 */
h5c3.LinkedListNode = gamecore.LinkedListNode.extend('h5c3.LinkedListNode',
	/** @lends h5c3.LinkedListNode */
	{},
	/** @lends h5c3.LinkedListNode.prototype */
	{});

/**
 * @class h5c3.HashList
 * @augments gamecore.HashList
 */
h5c3.HashList = gamecore.HashList.extend('h5c3.HashList',
	/** @lends h5c3.HashList */
	{},
	/** @lends h5c3.HashList.prototype */
	{});

h5c3.plugin = new h5c3.Hashtable();
h5c3.systems = new h5c3.Hashtable();
h5c3.components = new h5c3.Hashtable();
h5c3.entityFactory = null;
h5c3.soundFactory = null;


/**
 * Loading of resources is handle internally. DO NOT CALL THESE FUNCTIONS DIRECTLY.
 *
 * @namespace h5c3.GameResources
 * @class h5c3.GameResources
 * @augments h5c3.Base
 */
window.h5c3.GameResources = h5c3.Base.extend('h5c3.GameResources', {}, {
    /**
     * @property {object} resources
     * @default null
	 * @memberof h5c3.GameResources
     */
    resources: null,
    /**
     * @property {boolean} xmlLoaded
     * @default null
	 * @memberof h5c3.GameResources
     */
    xmlLoaded: false,

    /**
	 * @public
	 * @method
	 * @memberof h5c3.GameResources
	 * @desc
     * &lt;/p>
	 * Initialization method. Adds Publisher & Framework resources to loading Que. Then parses the embded XML and ques all resources for loading.
	 * &lt;/p>
     */
    init: function () {
        this._super();

        if (this.resources === this.loadConfig()) {
            this.xmlLoaded = true;
			//Process Configuration
        }
    },

    /**
     * Parses XML and returns an XMLDoc
	 * @memberof h5c3.GameResources
     */
    parseXML: function (xml) {
        var result,
            xmlDoc;

        if (window.DOMParser) {
            // standard
            if (!this.xmlParser) {
                this.xmlParser = new window.DOMParser();
            }
            result = this.xmlParser.parseFromString(xml, "text/xml");
        } else {
            // ie
            xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.async = false;
            result = xmlDoc.loadXML(xml);
        }
        return result;
    }, //end parseXML()

    loadConfig: function () {
        function _getAttributes(attr, obj) {
			var a;
			for (a = 0; a &lt; attr.length; ++a) 
			{ 
				obj[attr[a].nodeName] = attr[a].nodeValue; 
			}
            obj.length = attr.length;
        }

        function _XMLtoOBJ(xml, tag) {
            //var res = new Array();
            var 
				i, res = [],
				data = xml.getElementsByTagName(tag);
				
            if (data) {
                for (i = 0; i &lt; data.length; ++i) {
                    if (tag === 'game') {
                        _getAttributes(data[i].attributes, res);
                    } else {
                        res[i] = [];
                        _getAttributes(data[i].attributes, res[i]); //use index instead of name
                    }

                }
            }
            res.length = data.length;
            return res;
        } //end xml_to_array()

        this.debug('Parsing application resources...');
		var res = [],
			xml = false;
        try {
			xml = this.parseXML($GEI('resources').innerHTML);
            res['game'] = _XMLtoOBJ(xml, 'game');
            res['credits'] = _XMLtoOBJ(xml, 'credit');
            res['languages'] = _XMLtoOBJ(xml, 'language');
            res['plugins'] = _XMLtoOBJ(xml, 'plugin');
            res['files'] = _XMLtoOBJ(xml, 'file');
            res['options'] = _XMLtoOBJ(xml, 'option');
            res['sounds'] = _XMLtoOBJ(xml, 'sound');
            res['images'] = _XMLtoOBJ(xml, 'image');
        } catch (e) {
            this.debug('Error parsing embeded XML.');
            res = false;
        }
        this.debug('Complete.');
        return res;
    },

    /**
     * This method parses the embeded XML resource data into an array
     *
	 * @memberof h5c3.GameResources
     * @returns {Array} res
     */
    loadResources: function () {
        this.debug('Queing internal resources...');
        /** Required Engine images - Loaded automatically **/
        h5c3.device.loader.add(new h5c3.Image('publisher', 'http://resources.i2tmlabs.com/images/logo-i2tmlabs-hd.png'));
        h5c3.device.loader.add(new h5c3.Image('h5c3', 'http://resources.i2tmlabs.com/images/logo-h5c3-hd.png'));
        //h5c3.device.loader.add(new h5c3.Image('btnDebug', 'http://resources.i2tmlabs.com/images/buttons_debug.png'));
        //h5c3.device.loader.add(new h5c3.Image('touchpad', 'http://resources.i2tmlabs.com/images/touchpad_buttons.png'));
        /** Required Engine sound - Loaded automatically **/
        h5c3.device.loader.add(new h5c3.Sound('i2tm', 'http://resources.i2tmlabs.com/sounds/i2tm', ['ogg'], 1));
        this.loadGraphics();
        this.loadAudio();
    },

    /**
     * Parse array and que all graphics for loading
	 * @memberof h5c3.GameResources
     */
    loadGraphics: function () {
        this.debug('Queing application images resources...');
        var i, data = this.resources.images;

        for (i = 0; i &lt; data.length; ++i) {
            h5c3.device.loader.add(new h5c3.Image(data[i].name, data[i].file));
		}
    },

    /**
     * Parse array and que all audio for loading
	 * @memberof h5c3.GameResources
     */
    loadAudio: function () {
        if (h5c3.device.soundEnabled) {
            this.debug('Queing application audio resources...');
            var 
				i, f1, f2,
				data = this.resources.sounds;

            for (i = 0; i &lt; data.length; i++) {
                if (data[i].ogg === "true") {
                    f1 = "ogg";
                } else {
                    f1 = "";
                }
                if (data[i].mp3 === "true") {
                    f2 = "mp3";
                } else {
                    f2 = "";
                }
                h5c3.device.loader.add(new h5c3.Sound(data[i].name, data[i].file, [f1, f2], data[i].channels));
            }
        }
    }
});


/**
 * Handles preparing the document, loading resources, and starting webapp.
 * All methods of this class are private. An instance is created upon load.
 *
 * @namespace h5c3.bootstrap
 * @class h5c3.bootstrap
 * @type h5c3.Base
 */
window.h5c3.bootstrap = h5c3.Base.extend('h5c3.bootstrap', 
{}, 
{
	/**
	 * @property {string} $baseUrl
	 * @private
	 * @memberof h5c3.bootstrap
	 */
    $baseUrl: '',
	/**
	 * @property {number} $current
	 * @private
	 * @memberof h5c3.bootstrap
	 */
    $current: 0,
	/**
	 * Framework has finished loading.
	 * @property {boolean} $finished
	 * @public
	 * @memberof h5c3.bootstrap
	 */
    $finished: false,
	/**
	 * @property {string}
	 * @private
	 * @memberof h5c3.bootstrap
	 */
    $noCacheString: '',
	/**
	 * @property {Array}
	 * @private
	 * @memberof h5c3.bootstrap
	 */
    $scripts: [],
	/**
	 * @property {object}
	 * @private
	 * @memberof h5c3.bootstrap
	 */
    $options: {},

    /**
     * Main initilaiztion for the Bootstrap object. Makes sure the browser is chrome,
     * and then creates the canvas and inserts into the document. Also sets the fullscreen listener.
     * @method
     * @private
	 * @memberof h5c3.bootstrap
     */
    init: function () {
        this.debug(h5c3.tag() + ' loaded.');
        this.$options = {
            screen: {
                width: 640,
                height: 360,
                orientation: H5C3.ORIENTATION.AUTO
            },
            files: [],
            plugins: [],
            fullscreen: false,
            webapp: false
        };

        h5c3.resources = new h5c3.GameResources();

        //this.config();
        this.$loc = this.getFileName();
		this._BrowserIsChrome();
		var $c = $AET('waDIV', 'canvas', 'waCANVAS');
		$c.style.background = 'Black';
		$c.width = 1920;
		$c.height = 1080;
		$c.style.width = this.$options.screen.width + 'px';
		$c.style.height = this.$options.screen.height + 'px';
    },

    /**
     * configuration
     * @method
     * @private
	 * @memberof h5c3.bootstrap
     */
    config: function ($opts) {
        this.debug('Processing configuration options.');
        if (typeof $opts === 'object') {
            if ($opts.files instanceof Array) {
                this.$options.files = $opts.files;
            }
            if ($opts.plugins instanceof Array) {
                this.$options.plugins = $opts.plugins;
            }
            if (typeof ($opts.fullscreen) === 'boolean') {
                this.$options.fullscreen = $opts.fullscreen;
            }
            if (typeof ($opts.webapp) === 'boolean') {
                this.$options.webapp = $opts.webapp;
            }
            if (typeof ($opts.screen) === 'object') {
                $CHK($opts.screen.width, 640);
                $CHK($opts.screen.height, 360);
                $CHK($opts.screen.width, H5C3.ORIENTATION.AUTO);
            }
        } else {
			var foo=false;
        }
    },
	
    /**
	 * Starts execution.
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */
    go: function ($opts) {
        this.config($opts);
        var $el = $GEI('waCANVAS');


        $el.style.width = this.$options.screen.width;
        $el.style.height = this.$options.screen.height;

        /* Determine fullscreen mode */
        if (this.$options.fullscreen) {
			this.debug('OPTION: Fullscreen mode enabled.');
            $DOC().addEventListener('webkitfullscreenchange', h5c3.bootstrap._onFullscreenChange);
            $el.webkitRequestFullScreen();
        } else {
			this.debug('OPTION: Fullscreen mode disabled.');
		}

        if (this.$loc === 'local.html') {
            /*  Local In-House only mode */
            this.debug('Running in Local in-house mode.');
            this.localLib('../h5c3/lib/');										/** this.debug **/
            if (this.$options.plugins.length > 0) {
                this.loadPlugins(this.$options.plugins, '../h5c3/plugins/');
            }
            if (this.$options.files.length > 0) {
                this.que(this.$options.files, 'js/');
            }
        } else if (this.$loc === 'debug.html') {
            /*  Developer(s) debug mode */
            this.debug('Running in Developer debug mode.');
            if (this.$options.plugins.length > 0) {
                this.loadPlugins(this.$options.plugins, H5C3.LOCATION + 'plugins/');
            }
            if (this.$options.files.length > 0) {
                this.que(this.$options.files, 'js/');
            }
        } else if (this.$loc === 'index.html') {
            /*  Site Production mode */
            this.debug('Running in Production mode.');
            h5c3.devMode = false;
            if (this.$options.plugins.length > 0) {
                this.loadPlugins(this.$options.plugins, H5C3.LOCATION + 'plugins/');
            }
            this.que(['game.min.js.gz']);
        }
        this.start();
    },

    /**
     * Looks at the current page and gets the name of the html file.
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
	 * @returns {string} HTML filename
     */
    getFileName: function () {
        var $url = document.location.href;
        $url = $url.substring(0, ($url.indexOf("#") === -1) ? $url.length : $url.indexOf("#"));
        $url = $url.substring(0, ($url.indexOf("?") === -1) ? $url.length : $url.indexOf("?"));
        $url = $url.substring($url.lastIndexOf("/") + 1, $url.length);
        return $url;
    },

    /**
	 * Called when switching in/out of fullscreen mode.
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */
    _onFullscreenChange: function () {
       var $c = $GEI('waCANVAS');
        if (document.mozFullScreen || document.webkitIsFullScreen) {
            $c.style.width = window.screen.width + 'px';
            $c.style.height = window.screen.height + 'px';
        } else {
            $c.style.width = h5c3.bootstrap.$options.screen.width + 'px';
            $c.style.height = h5c3.bootstrap.$options.screen.height + 'px';
        }
    },

    /**
     * Check to see if the browser is chrome and hide or show the play button
     * depending on the outcome.
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */
    _BrowserIsChrome: function () {
        var $ok = /chrome/.test(window.navigator.userAgent.toLowerCase()),
            $pn = $GEI('playnow'),
            $cp = $GEI('cantplay');

        if ($pn || $cp) {
            if ($ok) {
                $pn.style.display = 'block';
                $cp.style.display = 'none';
            } else {
                $pn.style.display = 'none';
                $cp.style.display = 'block';
            }
        }
    },

    /**
     * Tells the resource loader to disable caching in the browser by modifying the resource src
     * by appending the current time
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */
    setDisableCache: function () {
        this.$noCacheString = '?nocache=' + Date.now();
    },

	/** 
	 * Sets the directory/path to load from. Do not call directly.
	 *
	 * @method
     * @private
	 * @param {string} $url desired path.
	 * @memberof h5c3.bootstrap
     */	 
    setBaseUrl: function ($url) {
        this.$baseUrl = $url;
    },

	/** 
	 * given a script name creates and returns a valid URL
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
	 * @returns {string} URL
     */	 
    _makeUrl: function ($src) {
        return this.$baseUrl + $src + this.$noCacheString;
    },

	/** 
	 * Add a script to the que. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */	 
    add: function ($src) {
        this.$scripts.push(this._makeUrl($src));
    },

	/** 
	 * Start loading all files in que. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */	 
    start: function () {
        this.debug('Loading source files...');
        this.$current = 0;
        this._loadNextScript();
    },

	/** 
	 * Load the next script in que. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */	 
    _loadNextScript: function () {
        var 
			$src = this.$scripts[this.$current],
			$script = window.document.createElement("script");

        $script.type = "application/javascript";
        $script.src = $src;
        $script.async = false;
        $script.onload = function () {
            if ($script.src.indexOf('plugin.js') !== -1) {
                h5c3.debug('Plugin Detected: ' + $script.src);
            } else {
                h5c3.debug('Loaded ' + $script.src);
            }
            h5c3.bootstrap._checkAllDone();
        };

        $script.onerror = function () {
            throw ('h5c3.bootstrap::_loadNextScript() - Could not load javascript file: ' + $script.src);
        };

        window.document.getElementsByTagName("head")[0].appendChild($script);
    },

	/** 
	 * See if all scripts are loaded. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */	 
    _checkAllDone: function () {
        if (!this.$finished) {
            if (this.$scripts.length - 1 === this.$current) {
                this.$finished = true;
				h5c3.device = new h5c3.Device();
				h5c3.device.boot();
            } else {
                this.$current++;
                this._loadNextScript();
            }
        }
    },

	/** 
	 * Add multiple scripts to the que. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */	 
    que: function ($scripts, $engineBaseURL) {
        this.debug('que(' + $engineBaseURL + ')');
        var $i = 0;
        this.setBaseUrl($engineBaseURL);
        for ($i = 0; $i &lt; $scripts.length; $i++) {
            this.add($scripts[$i]);
        }
    },

	/** 
	 * In-House use only; Used to include all source files for deugging.
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */	 
    localLib: function ($engineBaseURL) {								/** this.debug **/
        this.debug('Loading local framework source files...');			/** this.debug **/
        this.setBaseUrl($engineBaseURL);								/** this.debug **/

        /** H5C3 Framework **/				
        this.add('ext/base64.js');										/** this.debug **/

        /** ENGINE **/
        this.add('engine/media.js');									/** this.debug **/
        this.add('engine/input.js');									/** this.debug **/
        this.add('engine/tools.js');									/** this.debug **/
        this.add('engine/loader.js');									/** this.debug **/
        this.add('engine/dataresource.js');								/** this.debug **/
        this.add('engine/math.js');										/** this.debug **/
        this.add('engine/accutimer.js');								/** this.debug **/
        this.add('engine/hashmap.js');									/** this.debug **/
        this.add('engine/systems.js');									/** this.debug **/
        this.add('engine/plugin.js');									/** this.debug **/
        this.add('engine/device.js');									/** this.debug **/

        /** FRAMEWORK **/
        this.add('framework/color.js');									/** this.debug **/
        this.add('framework/factory.js');								/** this.debug **/
        this.add('framework/banners.js');								/** this.debug **/
        this.add('framework/main.js');									/** this.debug **/
        this.add('framework/game.js');									/** this.debug **/
        this.add('framework/page.js');									/** this.debug **/
        this.add('framework/image.js');									/** this.debug **/
        this.add('framework/scene.js');									/** this.debug **/
        this.add('framework/sprite.js');								/** this.debug **/
        this.add('framework/spritesheet.js');							/** this.debug **/
        this.add('framework/entity.js');								/** this.debug **/
        this.add('framework/layer.js');									/** this.debug **/
        this.add('framework/sound.js');									/** this.debug **/
        this.add('framework/string.js');								/** this.debug **/
        this.add('framework/entitylayer.js');							/** this.debug **/
        this.add('framework/intro.js');									/** this.debug **/
		
        /** this.add('webapp/touchpad.js'); **/	
    },																	/** this.debug **/
	 
	/** 
	 * Used to load all plugins required by the application. Do not call directly, engine handles automatically.
	 *
	 * @method
     * @private
	 * @memberof h5c3.bootstrap
     */	 
    loadPlugins: function ($scripts, $engineBaseURL) {
        this.debug('loadPlugins(' + $engineBaseURL + ')');
        var $i = 0;
        this.setBaseUrl($engineBaseURL);
        for ($i = 0; $i &lt; $scripts.length; $i++) {
            this.add($scripts[$i] + '.js');
        }
    }
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="Framework.html">H5C3 Framework</a></li></ul><h3>Classes</h3><ul><li></li><li><a href="gamecore.Base.html">Base</a></li><li><a href="gamecore.Device.html">Device</a></li><li><a href="gamecore.DualPool.html">DualPool</a></li><li><a href="gamecore.DualPooled.html">DualPooled</a></li><li><a href="gamecore.HashList.html">HashList</a></li><li><a href="gamecore.LinkedList.html">LinkedList</a></li><li><a href="gamecore.LinkedNode.html">LinkedNode</a></li><li><a href="gamecore.Media.html">Media</a></li><li><a href="gamecore.PerformanceMeasure.html">PerformanceMeasure</a></li><li><a href="gamecore.Pool.html">Pool</a></li><li><a href="gamecore.Pooled.html">Pooled</a></li><li><a href="H5C3.html">H5C3</a></li><li><a href="h5c3.Base.html">Base</a></li><li><a href="h5c3.bootstrap.html">bootstrap</a></li><li><a href="h5c3.Color.html">Color</a></li><li><a href="h5c3.components.Activator.html">Activator</a></li><li><a href="h5c3.components.AI.html">AI</a></li><li><a href="h5c3.components.Alpha.html">Alpha</a></li><li><a href="h5c3.components.Circle.html">Circle</a></li><li><a href="h5c3.components.Clip.html">Clip</a></li><li><a href="h5c3.components.Component.html">Component</a></li><li><a href="h5c3.components.Expiry.html">Expiry</a></li><li><a href="h5c3.components.Fade.html">Fade</a></li><li><a href="h5c3.components.Input.html">Input</a></li><li><a href="h5c3.components.Joint.html">Joint</a></li><li><a href="h5c3.components.Layout.html">Layout</a></li><li><a href="h5c3.components.OriginShifter.html">OriginShifter</a></li><li><a href="h5c3.components.Overlay.html">Overlay</a></li><li><a href="h5c3.components.ParticleEmitter.html">ParticleEmitter</a></li><li><a href="h5c3.components.Physics.html">Physics</a></li><li><a href="h5c3.components.Poly.html">Poly</a></li><li><a href="h5c3.components.Rect.html">Rect</a></li><li><a href="h5c3.components.Scale.html">Scale</a></li><li><a href="h5c3.components.Spatial.html">Spatial</a></li><li><a href="h5c3.components.Spin.html">Spin</a></li><li><a href="h5c3.components.Sprite.html">Sprite</a></li><li><a href="h5c3.components.Text.html">Text</a></li><li><a href="h5c3.DataResource.html">DataResource</a></li><li><a href="h5c3.Device.html">Device</a></li><li><a href="h5c3.Dim.html">Dim</a></li><li><a href="h5c3.Entity.html">Entity</a></li><li><a href="h5c3.EntityFactory.html">EntityFactory</a></li><li><a href="h5c3.EntityLayer.html">EntityLayer</a></li><li><a href="h5c3.EntityManager.html">EntityManager</a></li><li><a href="h5c3.Factory.html">Factory</a></li><li><a href="h5c3.Game.html">Game</a></li><li><a href="h5c3.GameResources.html">GameResources</a></li><li><a href="h5c3.HashList.html">HashList</a></li><li><a href="h5c3.Hashmap.html">Hashmap</a></li><li><a href="h5c3.Hashtable.html">Hashtable</a></li><li><a href="h5c3.Image.html">Image</a></li><li><a href="h5c3.Input.html">Input</a></li><li><a href="h5c3.IntroLayer.html">IntroLayer</a></li><li><a href="h5c3.IntroScene.html">IntroScene</a></li><li><a href="h5c3.IsoTileLayer.html">IsoTileLayer</a></li><li><a href="h5c3.Layer.html">Layer</a></li><li><a href="h5c3.LinkedList.html">LinkedList</a></li><li><a href="h5c3.LinkedListNode.html">LinkedListNode</a></li><li><a href="h5c3.Loader.html">Loader</a></li><li><a href="h5c3.Main.html">Main</a></li><li><a href="h5c3.Math.html">Math</a></li><li><a href="h5c3.Plugin.html">Plugin</a></li><li><a href="h5c3.plugin.Activator.html">Activator</a></li><li><a href="h5c3.plugin.AI.html">AI</a></li><li><a href="h5c3.plugin.Compatability.html">Compatability</a></li><li><a href="h5c3.plugin.Effects.html">Effects</a></li><li><a href="h5c3.plugin.Expiry.html">Expiry</a></li><li><a href="h5c3.plugin.Forms.html">Forms</a></li><li><a href="h5c3.plugin.Input.html">Input</a></li><li><a href="h5c3.plugin.Layout.html">Layout</a></li><li><a href="h5c3.plugin.ParticleEmitter.html">ParticleEmitter</a></li><li><a href="h5c3.plugin.Physics.html">Physics</a></li><li><a href="h5c3.Plugin.Render.html">Render</a></li><li><a href="h5c3.plugin.SpinJS.html">SpinJS</a></li><li><a href="h5c3.plugin.Strings.html">Strings</a></li><li><a href="h5c3.plugin.TileMap.html">TileMap</a></li><li><a href="h5c3.PLUGIN_NAME.html">PLUGIN_NAME</a></li><li><a href="h5c3.Point.html">Point</a></li><li><a href="h5c3.Pool.html">Pool</a></li><li><a href="h5c3.Pooled.html">Pooled</a></li><li><a href="h5c3.Rect.html">Rect</a></li><li><a href="h5c3.Scene.html">Scene</a></li><li><a href="h5c3.Sound.html">Sound</a></li><li><a href="h5c3.Sprite.html">Sprite</a></li><li><a href="h5c3.SpriteSheet.html">SpriteSheet</a></li><li><a href="h5c3.SystemManager.html">SystemManager</a></li><li><a href="h5c3.systems.Activation.html">Activation</a></li><li><a href="h5c3.systems.Effects.html">Effects</a></li><li><a href="h5c3.systems.EntitySystem.html">EntitySystem</a></li><li><a href="h5c3.systems.Expiration.html">Expiration</a></li><li><a href="h5c3.systems.Input.html">Input</a></li><li><a href="h5c3.systems.Layout.html">Layout</a></li><li><a href="h5c3.systems.Particles.html">Particles</a></li><li><a href="h5c3.systems.Physics.html">Physics</a></li><li><a href="h5c3.systems.Render.html">Render</a></li><li><a href="h5c3.systems.System.html">System</a></li><li><a href="h5c3.TileLayer.html">TileLayer</a></li><li><a href="h5c3.TileMap.html">TileMap</a></li><li><a href="h5c3.TileSet.html">TileSet</a></li><li><a href="h5c3.Tools.html">Tools</a></li><li><a href="h5c3.Vector.html">Vector</a></li></ul><h3>Namespaces</h3><ul><li><a href="Framework-window.SceneID.html">SceneID</a></li><li><a href="window.SceneID.html">SceneID</a></li></ul><h3>Global</h3><ul><li><a href="global.html#$AEA">$AEA</a></li><li><a href="global.html#$AET">$AET</a></li><li><a href="global.html#$AST">$AST</a></li><li><a href="global.html#$CHK">$CHK</a></li><li><a href="global.html#$CNT">$CNT</a></li><li><a href="global.html#$CTX">$CTX</a></li><li><a href="global.html#$DOC">$DOC</a></li><li><a href="global.html#$EGA">$EGA</a></li><li><a href="global.html#$ESA">$ESA</a></li><li><a href="global.html#$GEC">$GEC</a></li><li><a href="global.html#$GEI">$GEI</a></li><li><a href="global.html#$GEN">$GEN</a></li><li><a href="global.html#$PUW">$PUW</a></li><li><a href="global.html#$VLD">$VLD</a></li><li><a href="global.html#_onBlur">_onBlur</a></li><li><a href="global.html#_onFocus">_onFocus</a></li><li><a href="global.html#_onOffline">_onOffline</a></li><li><a href="global.html#_onOnline">_onOnline</a></li><li><a href="global.html#_onResize">_onResize</a></li><li><a href="global.html#add">add</a></li><li><a href="global.html#addInput">addInput</a></li><li><a href="global.html#Base64">Base64</a></li><li><a href="global.html#brk">brk</a></li><li><a href="global.html#clearHistory">clearHistory</a></li><li><a href="global.html#create">create</a></li><li><a href="global.html#createEntity">createEntity</a></li><li><a href="global.html#DESCRIPTION">DESCRIPTION</a></li><li><a href="global.html#devWindow">devWindow</a></li><li><a href="global.html#drawTiled">drawTiled</a></li><li><a href="global.html#end">end</a></li><li><a href="global.html#exists">exists</a></li><li><a href="global.html#GAMESTATE">GAMESTATE</a></li><li><a href="global.html#getCode">getCode</a></li><li><a href="global.html#getName">getName</a></li><li><a href="global.html#Gets an object from a string.">Gets an object from a string.</a></li><li><a href="global.html#h5c3">h5c3</a></li><li><a href="global.html#i2tmlabs">i2tmlabs</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#layer">layer</a></li><li><a href="global.html#loadFromTMX">loadFromTMX</a></li><li><a href="global.html#n">n</a></li><li><a href="global.html#NAME">NAME</a></li><li><a href="global.html#objects">objects</a></li><li><a href="global.html#onReady">onReady</a></li><li><a href="global.html#printStackTrace">printStackTrace</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#requires">requires</a></li><li><a href="global.html#rotate">rotate</a></li><li><a href="global.html#show">show</a></li><li><a href="global.html#splash">splash</a></li><li><a href="global.html#sprintf">sprintf</a></li><li><a href="global.html#srcDir">srcDir</a></li><li><a href="global.html#start">start</a></li><li><a href="global.html#toString">toString</a></li><li><a href="global.html#use">use</a></li><li><a href="global.html#uses">uses</a></li><li><a href="global.html#VERSION">VERSION</a></li><li><a href="global.html#what">what</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Sun Jul 21 2013 16:52:46 GMT-0700 (MST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
