<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: h5c3.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: h5c3.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * @preserve H5C3 Framework v{VERSION}-{DISTRO}
 * @file h5c3.debug.js
 * @desc
 * Forked from Playcraft v0.5.6 ... 16 DEC 2012
 * Copyright 2013 - I2TM Labs
 * See licence.txt for details
 * 89,462 bytes minimized
 */
/**
 * Special include file added to the playcraft library when it's been built and packed. This file is not included
 * when the developer loader is used to run the game. This file is for official release (no developer tools)
 * compression ratio: 2602/11071=0.235
 */
if (typeof (h5c3) === "undefined") {
    /**
     * @class H5C3
	 * @desc
	 * &lt;p>
     * Primary object in which the entire engine and framework reside. This is for the production
     * version of the Framework.
	 * &lt;/p> 
     */
    H5C3 = gamecore.Base('H5C3', {
        /**
		 * Holds the name of this framework
         * @property {string} NAME
		 * @protected
		 * @memberof H5C3
         */
        NAME: 'H5C3 Framework',
        /**
		 * Holds the current version of the framework
         * @property {string} VERSION 
		 * @protected
		 * @memberof H5C3
         */
        VERSION: '{VERSION}',
        /**
		 * Holds the distrobution tag of the framework
         * @property {string} DISTRO 
		 * @protected
		 * @memberof H5C3
         */
        DISTRO: '{DISTRO}',
        /**
		 * URL to where the H5C3 Framework root folder
         * @property {string} LOCATION 
		 * @protected
		 * @memberof H5C3
         */
        LOCATION: 'http://www.i2tmlabs.com/h5c3/',
        /**
		 * Contants used for defining device orientation.
         * @property {object} ORIENTATION
		 * @static
		 * @memberof H5C3
         */
        ORIENTATION: {
            AUTO: 0x0000,
            LANDSCAPE: 0x0001,
            PORTRAIT: 0x0002
        }
    }, {
        /**
		 * @memberof H5C3
         * @property {Array} Container for all plugins components.
		 * @public
         */
        plugin: null,
        /**
		 * @memberof H5C3
         * @property {Array} Container for all loaded Systems.
		 * @public
         */
        systems: null,
        /**
		 * @memberof H5C3
         * @property {Array} Container for all loaded components.
		 * @public
         */
        components: null,
        /**
		 * @memberof H5C3
         * @property {EntityFactory} Manager for all Entity objects.
		 * @public
         */
        entityFactory: null,
        /**
		 * @memberof H5C3
         * @property {SoundFactory} Manager for all Sound objects.
		 * @public
         */
        soundFactory: null,
        /**
		 * @memberof H5C3
         * @property {SceneFactory} Manager for all Scene objects.
		 * @public
         */
        sceneFactory: null,
        /**
		 * @memberof H5C3
         * @property {boolean} devMode True if we are debugging, False otherwise
		 * @public
         */
        devMode: true,

        /**
		 * Initialization
		 *
		 * @memberof H5C3
         * @method
		 * @public
         */
		init: function() {
			this._super();
		},
		
        /**
		 * Returns the Frameworks current Name
		 *
		 * @memberof H5C3
         * @method
		 * @public
		 * @returns {string} Full name and version of the framework.
         */
		tag: function() {
			return H5C3.NAME+' v'+H5C3.VERSION+'-'+H5C3.DISTRO;
		},
		
        /**
		 * Called via the onload event to start execution
		 *
		 * @memberof H5C3
         * @method
		 * @public
         */
		run: function() {
			this.bootstrap = new h5c3.Bootstrap();
		}		
    });

    /**
	 * @static
	 * @desc
     * &lt;p>
	 * Primary object used by framework. All class definitions and child object reside within this object.
	 * &lt;/p>
     */
	h5c3 = new H5C3();
	
    /**
	 * @memberof h5c3
     * @desc Interface to gameCore.js Library {@link https://github.com/playcraft/gamecore.js gameCore.js}
     */
	{
		/**
		 * @class h5c3.Base
		 * @augments gamecore.Base
		 * A base class providing logging, object counting and unique object id's
		 * Examples:
		 *
		 * Unique ID and total objects:
		 * &lt;pre>&lt;code>
		 * var Fighter = h5c3.Base.extend('Fighter', {}, {});
		 * var fighter1 = new Fighter();
		 * var fighter2 = new Fighter();
		 * fighter1.uniqueId;    // -> 'Fighter:0'
		 * fighter2.uniqueId;    // -> 'Fighter:1'
		 * Fighter.totalObjects; // -> 2
		 * &lt;/code>&lt;/pre>
		 *
		 * Logging: (log, info, warn, error, debug)
		 * &lt;pre>&lt;code>
		 * fighter1.warn('oops'); // == console.log('Fighter:0 [WARN] oops');
		 * &lt;/code>&lt;/pre>
		 */
		h5c3.Base = gamecore.Base('h5c3.Base',
			/** @lends h5c3.Base */
			{},
			/** @lends h5c3.Base.prototype */
			{
				/**
				 * Used for sending debugging messages to either console, debugger or both.
				 *
				 * @function
				 * @public
				 * @param {string] message
				 */
				debug: function (message) {
					var log = $GEI("waConsoleLog");

					if ($VLD(log)) {
						log.value += this.uniqueId + '->' + message + '\n';
						log.scrollTop = log.scrollHeight;
					}
					console.log(this.uniqueId + '->' + message);
				}
			});

		/**
		 * @class h5c3.Hashtable
		 * @augments gamecore.Hashtable
		 * @desc Interface function gameCore.jhashtable...JavaScript implementation of a hash table. It creates a single constructor function called Hashtable in the global scope.
		 * Example:
		 * &lt;code>
		 *     var map = new h5c3.Hashtable();
		 *     map.put('test1', obj);
		 *     var obj = map.get('test1');
		 * &lt;/code>
		 */
		h5c3.Hashtable = gamecore.Hashtable;
			
		/**
		 * @class h5c3.Pool
		 * @augments gamecore.Pool
		 * @desc 
		 * Easy (high-performance) object pooling
		 *
		 * A pool of objects for use in situations where you want to minimize object life cycling (and
		 * subsequently garbage collection). It also serves as a very high speed, minimal overhead
		 * collection for small numbers of objects.
		 * &lt;p>
		 * This class maintains mutual an array of objects which are free. If you wish to maintain a list of both
		 * free and used then see the gamecore.DualPool.
		 * &lt;p>
		 * Pools are managed by class type, and will auto-expand as required. You can create a custom initial pool
		 * size by deriving from the Pool class and statically overriding INITIAL_POOL_SIZE.
		 * &lt;p>
		 * Keep in mind that objects that are pooled are not constructed; they are "reset" when handed out.
		 * You need to "acquire" one and then reset its state, usually via a static create factory method.
		 * &lt;p>
		 * Example:
		 * &lt;pre>&lt;code>
		 * Point = h5c3.Pooled('Point',
		 * {
		 *   // Static constructor
		 *   create:function (x, y)
		 *   {
		 *      var n = this._super();
		 *      n.x = x;
		 *      n.y = y;
		 *      return n;
		 *   }
		 * },
		 * {
		 *    x:0, y:0,   // instance
		 *
		 *    init: function(x, y)
		 *    {
		 *       this.x = x;
		 *       this.y = y;
		 *    }
		 * }
		 * &lt;/code>&lt;/pre>
		 * To then access the object from the pool, use create, instead of new. Then release it.
		 * &lt;pre>&lt;code>
		 * var p = Point.create(100, 100);
		 * // ... do something
		 * p.release();
		 * &lt;/code>&lt;/pre>
		 *
		 */
		h5c3.Pool = gamecore.Pool.extend('h5c3.Pool',
			/** @lends h5c3.Pool */
			{},
			/** @lends h5c3.Pool.prototype */
			{});

		/**
		 * @class h5c3.Pooled
		 * @augments h5c3.Pooled
		 * 
		 * @desc Used as a base class for objects which are life cycle managed in an object pool.
		 */
		h5c3.Pooled = gamecore.Pooled.extend('h5c3.Pooled',
			/** @lends h5c3.Pooled */
			{},
			/** @lends h5c3.Pooled.prototype */
			{});

		/**
		 * @class h5c3.LinkedList 
		 * @augments gamecore.LinkedList
		 *
		 * gamecore.LinkedList
		 */
		h5c3.LinkedList = gamecore.LinkedList.extend('h5c3.LinkedList',
			/** @lends h5c3.LinkedList */
			{},
			/** @lends h5c3.LinkedList.prototype */
			{});

		/**
		 * @class h5c3.LinkedListNode
		 * @augments gamecore.LinkedListNode
		 */
		h5c3.LinkedListNode = gamecore.LinkedListNode.extend('h5c3.LinkedListNode',
			/** @lends h5c3.LinkedListNode */
			{},
			/** @lends h5c3.LinkedListNode.prototype */
			{});

		/**
		 * @class h5c3.HashList
		 * @augments gamecore.HashList
		 */
		h5c3.HashList = gamecore.HashList.extend('h5c3.HashList',
			/** @lends h5c3.HashList */
			{},
			/** @lends h5c3.HashList.prototype */
			{});

		if (!Function.prototype.bind) {
			Function.prototype.bind = function (oThis) {
				if (typeof this !== "function") {
					// closest thing possible to the ECMAScript 5 internal IsCallable function
					throw new TypeError("boot.js::Function.prototype.bind - what is trying to be fBound is not callable");
				}

				var aArgs = Array.prototype.slice.call(arguments, 1),
					fToBind = this,
					fNOP = function () {},
					fBound = function () {
						return fToBind.apply(this instanceof fNOP ? this : oThis || window, aArgs.concat(Array.prototype.slice.call(arguments)));
					};

				fNOP.prototype = this.prototype;
				fBound.prototype = new fNOP();
				return fBound;
			};
		};

		if (!Array.prototype.indexOf) {
			Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {
				"use strict";
				if (this === null) {
					throw new TypeError();
				}
				var t = Object(this),
					n = 0,
					len = t.length >>> 0;
				if (len === 0) {
					return -1;
				}
				if (arguments.length > 0) {
					n = Number(arguments[1]);
					if (n !== n) { // shortcut for verifying if it's NaN
						n = 0;
					} else if (n !== 0 && n !== Infinity && n !== -Infinity) {
						n = (n > 0 || -1) * Math.floor(Math.abs(n));
					}
				}
				if (n >= len) {
					return -1;
				}
				var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);
				for (; k &lt; len; k++)

					for (; k &lt; len; k++) {
						if (k in t && t[k] === searchElement) {
							return k;
						}
					}
				return -1;
			}
		};
	}

    h5c3.plugin = new h5c3.Hashtable();
    h5c3.systems = new h5c3.Hashtable();
    h5c3.components = new h5c3.Hashtable();
    h5c3.entityFactory = null;
    h5c3.soundFactory = null;

}; //end h5c3 definition


/**
 * Some shortcut tools for working with the DOM. These actually help save overall file size.
 */
if (typeof ($DOC) === "undefined") {

    /**
	 * @function $DOC
     * @returns {document} Returns the document
     * &lt;p>
	 * Alias for document - only shortens by 3 characters, but to be standard,
     * plus it adds up when you have 500 calls to document!&lt;/p>
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
	 * $DOC().addEventListener('webkitfullscreenchange', h5c3.Bootstrap._onFullscreenChange);
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $DOC = function () {
        return window.document;
    };

    /**
	 * @function $CTX
     * @param {string|canvas} $element The name of an canvas or the actual canvas
     * @returns {context} Returns the 2D drawing context.
     * &lt;p>
     * Alias for document.getElementByID(canvas).getContext("2d");
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
	 * var myCTX = $CTX("myCanvas");
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $CTX = function ($element) {
        return $CNT($element).getContext("2d");
    };

    /**
	 * @function $GEI
     * @param {string} id The ID of the element you want returned
     * @returns {element} Returns the element uniquely identified by its id identifier.
     * &lt;p>
     * Alias for document.getElementByID()
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
	 * var element = $GEI("myDIV");
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $GEI = function ($id) {
        return $DOC().getElementById($id);
    };

    /**
	 * @function $GEN
     * @param {string} $name The name of the elements you want returned
     * @returns {collection} Returns the collection of elements with the given name
     * &lt;p>
     * Alias for document.getElementsByName()
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
	 * var elements = $GEN("DIV");
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $GEN = function ($name) {
        return $DOC().getElementsByName($name);
    };

    /**
	 * @function $GEC
     * @param {string} $class The class name of the elements you want returned
     * @returns {collection} Returns the collection of elements with the given classname
     * &lt;p>
     * Alias for document.getElementsByClass()
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
	 * var elements = $GEN("red");
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $GEC = function ($class) {
        return $DOC().getElementsByClass($class);
    };

    /**
	 * @function $ESA
     * @param {string|element} $element The name of an element or the actual element
     * @param {string} name of the attribute you want to set
     * @param {string|number} value to assign
     * &lt;p>
     * Alias for element.setAttribute()
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
	 * $ESA("button","color","red");
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $ESA = function ($element, $name, $value) {
        $CNT($element).setAttribute($name, $value);
    };

    /**
	 * @function $EGA
     * @param {string|element} $element The name of an element or the actual element
     * @param {string} name of the attrinbute you want to get
     * &lt;p>
     * Alias for element.getAttribute()
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
	 * var btnColor = $EGA("button","color");
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $EGA = function ($element, $name) {
        $CNT($element).getAttribute($name);
    };

    /**
	 * @function $AEA
     * @param {string|element} $element The name of an element or the actual element
     * @param {string} $tag element to insert
     * @param {string} $id ID of the new element
     * @param {string} $htm HTML to insert into new element
     * &lt;p>
     * Inserts a new element before a given element
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
     * $AEA('someElementID','DIV','newDivID','This is inner HTML');
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $AEA = function ($element, $tag, $id, $htm) {
        var $el = $CNT($element),
            $ne = $DOC().createElement($tag);
        if ($id) {
            $ne.id = $id;
        }
        if ($htm) {
            $ne.innerHTML = $htm;
        }
        $el.parentNode.insertBefore($ne, $element);
        return $id;
    };

    /**
	 * @function $AET
     * @param {string|element} $element The name of an element or the actual element
     * @param {string} $tag element to insert
     * @param {string} $id ID of the new element
     * @param {string} htm HTML to insert into new element
     * @returns {element} returns the element jsut created & appended.
     * &lt;p>
     * Inserts a new element into a given element
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
     * $AET('someElementID','DIV','newDivID','This is inner HTML');
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $AET = function ($element, $tag, $id, $htm) {
        var $el = $CNT($element),
            $ne = $DOC().createElement($tag);
        if ($id) {
            $ne.id = $id;
        }
        if ($htm) {
            $ne.innerHTML = $htm;
        }
        $el.appendChild($ne);
        return $ne;
    };

    /**
	 * @function $CNT
     * @param {string|element} $element The name of an element or the actual element to append to
     * @returns {element} returns the element
     * &lt;p>
     * Checks node parameter. Returns an element no mater if the element is passed in or the sname of an element.
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
     * var $el = $CNT($element);
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $CNT = function ($element) {
        if (typeof ($element) === "string") {
            return $GEI($element);
        } else {
            return $element;
        }
    };

    /**
	 * @function $PUW
     * @param {string} $url The URL of the document to load in the new window
     * @param {string} $title The title to use for the new window
     * @param {boolean} $fullscreen True to open in fullscreen mode, false to use $width & $height and center
     * @param {number} $width The desired width of the new window
     * @param {number} $height The desired height of the new window
     * @returns {window} returns the new window
     * &lt;p>
     * Smart Popup Window, Either Fullscreen or Centered.
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
     * var $myWindow = $PUW('index.html','My Window',false,640,480);
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $PUW = function ($url, $title, $fullscreen, $width, $height) {
        var $popup,
            $left = (screen.availWidth / 2) - ($width / 2),
            $top = (screen.availHeight / 2) - ($height / 2);
        if ($fullscreen === true) {
            $popup = window.open($url, $title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no');
            $popup.moveTo(0, 0);
            $popup.resizeTo(screen.availWidth, screen.availHeight);
        } else {
            $popup = window.open($url, $title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=' + $width + ', height=' + $height + ', top=' + $top + ', left=' + $left);
        }
        if (!$popup || $popup.closed || $popup.closed === 'undefined' || $popup.screenX === 0) {
            alert('Please change your popup settings for this domain.');
        };
        return $popup;
    };

    /**
	 * @function $CHK
     * @param {*} p Parameter to check
     * @param {*} def Default value to return if p is either null or undefined
     * @returns {*} p if valid, otherwise def (default)
     * &lt;p>
     * Checks if a param is valid (null or undefined) in which case the default value will be returned
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
     * if ($CHK(foo,"bar")) { someFunction(); }
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $CHK = function (p, def) {
        if (!$VLD(p)) {
            return def;
        } else {
            return p;
        }
    };

    /**
	 * @function $VLD
     * @param {*} p A value
     * @returns {Boolean} true if the value is not undefined and not null
     * &lt;p>
     * Check if a value is valid (not null or undefined)
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
     * if !($VLD(foo)) { someFunction(); }
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $VLD = function (p) {
        return !(p === null || p === 'undefined' || p === undefined);
    };

    /**
	 * @function $AST
     * @param {Boolean} test A boolean result test
     * @param {String} error A string to throw with the exception
     * &lt;p>
     * Tests a boolean evaluation and throws an exception with the error string. (Assert)
	 * &lt;/p>
	 * Example:
	 * &lt;pre>&lt;code>
     * $AST(foo,'BOOYA!');
	 * &lt;/code>&lt;/pre>
	 * &lt;/p>
     */
    $AST = function (test, error) {
        if (!test) {
            throw error;
        }
    }
}; //end helper functions definition


/**
 * Loading of resources is handle internally. DO NOT CALL THESE FUNCTIONS DIRECTLY.
 *
 * @namespace h5c3.GameResources
 * @class h5c3.GameResources
 * @augments h5c3.Base
 */
h5c3.GameResources = h5c3.Base.extend('h5c3.GameResources', {}, {
    /**
     * @property {object} resources
     * @default null
	 * @memberof h5c3.GameResources
     */
    resources: null,
    /**
     * @property {boolean} xmlLoaded
     * @default null
	 * @memberof h5c3.GameResources
     */
    xmlLoaded: false,

    /**
	 * @public
	 * @method
	 * @memberof h5c3.GameResources
	 * @desc
     * &lt;/p>
	 * Initialization method. Adds Publisher & Framework resources to loading Que. Then parses the embded XML and ques all resources for loading.
	 * &lt;/p>
     */
    init: function () {
        this._super();

        if (this.resources = this.loadConfig()) {
            this.xmlLoaded = true;
			//Process Configuration
        }
    },

    /**
     * Parses XML and returns an XMLDoc
	 * @memberof h5c3.GameResources
     */
    parseXML: function (xml) {
        var result,
            xmlDoc;

        if (window.DOMParser) {
            // standard
            if (!this.xmlParser) {
                this.xmlParser = new DOMParser();
            }
            result = this.xmlParser.parseFromString(xml, "text/xml");
        } else {
            // ie
            xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.async = false;
            result = xmlDoc.loadXML(xml);
        }
        return result;
    }, //end parseXML()

    loadConfig: function () {
        function _getAttributes(attr, obj) {
            for (a = 0; a &lt; attr.length; ++a) obj[attr[a].nodeName] = attr[a].nodeValue;
            obj.length = attr.length;
        }

        function _XMLtoOBJ(xml, tag) {
            var res = new Array();
            var data = xml.getElementsByTagName(tag);
            if (data) {
                for (i = 0; i &lt; data.length; ++i) {
                    if (tag == 'game')
                        _getAttributes(data[i].attributes, res)
                    else {
                        res[i] = new Array();
                        _getAttributes(data[i].attributes, res[i]); //use index instead of name
                    }

                }
            }
            res.length = data.length;
            return res;
        } //end xml_to_array()

        this.debug('Parsing application resources...');
        var res = new Array();
        try {
            var xml = this.parseXML($GEI('resources').innerHTML);
            res['game'] = _XMLtoOBJ(xml, 'game');
            res['credits'] = _XMLtoOBJ(xml, 'credit');
            res['languages'] = _XMLtoOBJ(xml, 'language');
            res['plugins'] = _XMLtoOBJ(xml, 'plugin');
            res['files'] = _XMLtoOBJ(xml, 'file');
            res['options'] = _XMLtoOBJ(xml, 'option');
            res['sounds'] = _XMLtoOBJ(xml, 'sound');
            res['images'] = _XMLtoOBJ(xml, 'image');
        } catch (e) {
            this.debug('Error parsing embeded XML.');
            res = false;
        }
        this.debug('Complete.');
        return res;
    },

    /**
     * This method parses the embeded XML resource data into an array
     *
	 * @memberof h5c3.GameResources
     * @returns {Array} res
     */
    loadResources: function () {
        this.debug('Queing internal resources...');
        /** Required Engine images - Loaded automatically **/
        h5c3.device.loader.add(new h5c3.Image('publisher', 'http://resources.i2tmlabs.com/images/logo-i2tmlabs-hd.png'));
        h5c3.device.loader.add(new h5c3.Image('h5c3', 'http://resources.i2tmlabs.com/images/logo-h5c3-hd.png'));
        //h5c3.device.loader.add(new h5c3.Image('btnDebug', 'http://resources.i2tmlabs.com/images/buttons_debug.png'));
        //h5c3.device.loader.add(new h5c3.Image('touchpad', 'http://resources.i2tmlabs.com/images/touchpad_buttons.png'));
        /** Required Engine sound - Loaded automatically **/
        h5c3.device.loader.add(new h5c3.Sound('i2tm', 'http://resources.i2tmlabs.com/sounds/i2tm', ['ogg'], 1));
        this.loadGraphics();
        this.loadAudio();
    },

    /**
     * Parse array and que all graphics for loading
	 * @memberof h5c3.GameResources
     */
    loadGraphics: function () {
        this.debug('Queing application images resources...');
        var data = this.resources.images;

        for (i = 0; i &lt; data.length; ++i)
            h5c3.device.loader.add(new h5c3.Image(data[i].name, data[i].file));
    },

    /**
     * Parse array and que all audio for loading
	 * @memberof h5c3.GameResources
     */
    loadAudio: function () {
        if (h5c3.device.soundEnabled) {
            this.debug('Queing application audio resources...');
            var f1, f2;
            var data = this.resources.sounds;

            for (i = 0; i &lt; data.length; i++) {
                if (data[i].ogg == "true") {
                    f1 = "ogg"
                } else {
                    f1 = ""
                };
                if (data[i].mp3 == "true") {
                    f2 = "mp3"
                } else {
                    f2 = ""
                };
                h5c3.device.loader.add(new h5c3.Sound(data[i].name, data[i].file, [f1, f2], data[i].channels));
            }
        }
    }
});


/**
 * Handles preparing the document, loading resources, and starting webapp.
 * All methods of this class are private. An instance is created upon load.
 *
 * @namespace h5c3.Bootstrap
 * @class h5c3.Bootstrap
 * @type h5c3.Base
 */
h5c3.Bootstrap = h5c3.Base.extend('h5c3.Bootstrap', 
{}, 
{
	/**
	 * @property {string} $baseUrl
	 * @private
	 * @memberof h5c3.Bootstrap
	 */
    $baseUrl: '',
	/**
	 * @property {number} $current
	 * @private
	 * @memberof h5c3.Bootstrap
	 */
    $current: 0,
	/**
	 * Framework has finished loading.
	 * @property {boolean} $finished
	 * @public
	 * @memberof h5c3.Bootstrap
	 */
    $finished: false,
	/**
	 * @property {string}
	 * @private
	 * @memberof h5c3.Bootstrap
	 */
    $noCacheString: '',
	/**
	 * @property {Array}
	 * @private
	 * @memberof h5c3.Bootstrap
	 */
    $scripts: new Array(),
	/**
	 * @property {object}
	 * @private
	 * @memberof h5c3.Bootstrap
	 */
    $options: {},

    /**
     * Main initilaiztion for the Bootstrap object. Makes sure the browser is chrome,
     * and then creates the canvas and inserts into the document. Also sets the fullscreen listener.
     * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */
    init: function () {
        this.debug(h5c3.tag() + ' loaded.');
        this.$options = {
            screen: {
                width: 640,
                height: 360,
                orientation: H5C3.ORIENTATION.AUTO
            },
            files: new Array(),
            plugins: new Array(),
            fullscreen: false,
            webapp: false
        };

        h5c3.resources = new h5c3.GameResources();

        //this.config();
        this.$loc = this.getFileName();
		this._BrowserIsChrome();
		var $c = $AET('waDIV', 'canvas', 'waCANVAS');
		$c.style.background = 'Black';
		$c.width = 1920;
		$c.height = 1080;
		$c.style.width = this.$options.screen.width + 'px';
		$c.style.height = this.$options.screen.height + 'px';
    },

    /**
     * configuration
     * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */
    config: function ($opts) {
        this.debug('Processing configuration options.');
        if (typeof ($opts) === 'object') {
            if ($opts.files instanceof Array) {
                this.$options.files = $opts.files;
            }
            if ($opts.plugins instanceof Array) {
                this.$options.plugins = $opts.plugins;
            }
            if (typeof ($opts.fullscreen) === 'boolean') {
                this.$options.fullscreen = $opts.fullscreen;
            }
            if (typeof ($opts.webapp) === 'boolean') {
                this.$options.webapp = $opts.webapp;
            }
            if (typeof ($opts.screen) === 'object') {
                $CHK($opts.screen.width, 640);
                $CHK($opts.screen.height, 360);
                $CHK($opts.screen.width, h5c3.ORIENTATION.AUTO);
            }
        } else {

        }
    },
	
    /**
	 * Starts execution.
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */
    go: function ($opts) {
        this.config($opts);
        var $el = $GEI('waCANVAS');


        $el.style.width = this.$options.screen.width;
        $el.style.height = this.$options.screen.height;

        /* Determine fullscreen mode */
        if (this.$options.fullscreen) {
			this.debug('OPTION: Fullscreen mode enabled.');
            $DOC().addEventListener('webkitfullscreenchange', h5c3.Bootstrap._onFullscreenChange);
            $el.webkitRequestFullScreen();
        } else {
			this.debug('OPTION: Fullscreen mode disabled.');
		}

        if (this.$loc === 'local.html') {
            /*  Local In-House only mode */
            this.debug('Running in Local in-house mode.');
            this.localLib('../h5c3/lib/');
            if (this.$options.plugins.length > 0) {
                this.loadPlugins(this.$options.plugins, '../h5c3/plugins/');
            }
            if (this.$options.files.length > 0) {
                this.que(this.$options.files, 'js/');
            }
        } else if (this.$loc === 'debug.html') {
            /*  Developer(s) debug mode */
            this.debug('Running in Developer debug mode.');
            if (this.$options.plugins.length > 0) {
                this.loadPlugins(this.$options.plugins, h5c3.LOCATION + 'plugins/');
            }
            if (this.$options.files.length > 0) {
                this.que(this.$options.files, 'js/');
            }
        } else if (this.$loc === 'index.html') {
            /*  Site Production mode */
            this.debug('Running in Production mode.');
            h5c3.devMode = false;
            if (this.$options.plugins.length > 0) {
                this.loadPlugins(this.$options.plugins, h5c3.LOCATION + 'plugins/');
            }
            this.que(['game.min.js.gz']);
        }
        this.start();
    },

    /**
     * Looks at the current page and gets the name of the html file.
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
	 * @returns {string} HTML filename
     */
    getFileName: function () {
        var $url = document.location.href;
        $url = $url.substring(0, ($url.indexOf("#") == -1) ? $url.length : $url.indexOf("#"));
        $url = $url.substring(0, ($url.indexOf("?") == -1) ? $url.length : $url.indexOf("?"));
        $url = $url.substring($url.lastIndexOf("/") + 1, $url.length);
        return $url;
    },

    /**
	 * Called when switching in/out of fullscreen mode.
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */
    _onFullscreenChange: function () {
        var $c = $GEI('waCANVAS');
        if (document.mozFullScreen || document.webkitIsFullScreen) {
            $c.style.width = window.screen.width + 'px';
            $c.style.height = window.screen.height + 'px';
        } else {
            $c.style.width = h5c3.Bootstrap.$options.screen.width + 'px';
            $c.style.height = h5c3.Bootstrap.$options.screen.height + 'px';
        }
    },

    /**
     * Check to see if the browser is chrome and hide or show the play button
     * depending on the outcome.
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */
    _BrowserIsChrome: function () {
        var $ok = /chrome/.test(window.navigator.userAgent.toLowerCase()),
            $pn = $GEI('playnow'),
            $cp = $GEI('cantplay');

        if ($pn || $cp) {
            if ($ok) {
                $pn.style.display = 'block';
                $cp.style.display = 'none';
            } else {
                $pn.style.display = 'none';
                $cp.style.display = 'block';
            }
        }
    },

    /**
     * Tells the resource loader to disable caching in the browser by modifying the resource src
     * by appending the current time
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */
    setDisableCache: function () {
        this.$noCacheString = '?nocache=' + Date.now();
    },

	/** 
	 * Sets the directory/path to load from. Do not call directly.
	 *
	 * @method
     * @private
	 * @param {string} $url desired path.
	 * @memberof h5c3.Bootstrap
     */	 
    setBaseUrl: function ($url) {
        this.$baseUrl = $url;
    },

	/** 
	 * given a script name creates and returns a valid URL
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
	 * @returns {string} URL
     */	 
    _makeUrl: function ($src) {
        return this.$baseUrl + $src + this.$noCacheString;
    },

	/** 
	 * Add a script to the que. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */	 
    add: function ($src) {
        this.$scripts.push(this._makeUrl($src));
    },

	/** 
	 * Start loading all files in que. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */	 
    start: function () {
        this.debug('Loading source files...');
        this.$current = 0;
        this._loadNextScript();
    },

	/** 
	 * Load the next script in que. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */	 
    _loadNextScript: function () {
        var $src = this.$scripts[this.$current];
        var $script = window.document.createElement("script");

        $script.type = "application/javascript";
        $script.src = $src;
        $script.async = false;
        $script.onload = function () {
            if ($script.src.indexOf('plugin.js') !== -1) {
                h5c3.debug('Plugin Detected: ' + $script.src);
            } else {
                h5c3.debug('Loaded ' + $script.src);
            }
            h5c3.bootstrap._checkAllDone();
        };

        $script.onerror = function () {
            throw ('h5c3.Bootstrap::_loadNextScript() - Could not load javascript file: ' + $script.src);
        };

        window.document.getElementsByTagName("head")[0].appendChild($script);
    },

	/** 
	 * See if all scripts are loaded. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */	 
    _checkAllDone: function () {
        if (!this.$finished) {
            if (this.$scripts.length - 1 === this.$current) {
                this.$finished = true;
				h5c3.device = new h5c3.Device();
				h5c3.device.boot();
            } else {
                this.$current++;
                this._loadNextScript();
            }
        }
    },

	/** 
	 * Add multiple scripts to the que. Do not call directly.
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */	 
    que: function ($scripts, $engineBaseURL) {
        this.debug('que(' + $engineBaseURL + ')');
        var $i = 0;
        this.setBaseUrl($engineBaseURL);
        for ($i = 0; $i &lt; $scripts.length; $i++) {
            this.add($scripts[$i]);
        }
    },

	/** 
	 * Used to load all plugins required by the application. Do not call directly, engine handles automatically.
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */	 
    loadPlugins: function ($scripts, $engineBaseURL) {
        this.debug('loadPlugins(' + $engineBaseURL + ')');
        var $i = 0;
        this.setBaseUrl($engineBaseURL);
        for ($i = 0; $i &lt; $scripts.length; $i++) {
            this.add($scripts[$i] + '.js');
        }
    },

	/** 
	 * In-House use only; Used to include all source files for deugging.
	 *
	 * @method
     * @private
	 * @memberof h5c3.Bootstrap
     */	 
    localLib: function ($engineBaseURL) {
        this.debug('Loading local framework source files...');
        this.setBaseUrl($engineBaseURL);

        /** H5C3 Framework **/
        this.add('ext/base64.js');

        /** DEBUGGER **/
        if (h5c3.DISTRO != 'Production') {
            this.add('engine/debugger.js');
        }

        /** ENGINE **/
        this.add('engine/media.js');
        this.add('engine/input.js');
        this.add('engine/tools.js');
        this.add('engine/loader.js');
        this.add('engine/dataresource.js');
        this.add('engine/math.js');
        this.add('engine/accutimer.js');
        this.add('engine/hashmap.js');
        this.add('engine/systems.js');
        this.add('engine/plugin.js');
        this.add('engine/device.js');

        /** FRAMEWORK **/
        this.add('framework/color.js');
        this.add('framework/factory.js');
        this.add('framework/banners.js');
        this.add('framework/main.js');
        this.add('framework/game.js');
        this.add('framework/page.js');
        this.add('framework/image.js');
        this.add('framework/scene.js');
        this.add('framework/sprite.js');
        this.add('framework/spritesheet.js');
        this.add('framework/entity.js');
        this.add('framework/layer.js');
        this.add('framework/sound.js');
        this.add('framework/string.js');
        this.add('framework/entitylayer.js');
        this.add('framework/intro.js');

        /** this.add('webapp/touchpad.js'); **/
    }
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="H5C3.html">H5C3</a></li><li><a href="h5c3.Base.html">Base</a></li><li><a href="h5c3.Bootstrap.html">Bootstrap</a></li><li><a href="h5c3.GameResources.html">GameResources</a></li><li><a href="h5c3.HashList.html">HashList</a></li><li><a href="h5c3.Hashtable.html">Hashtable</a></li><li><a href="h5c3.LinkedList.html">LinkedList</a></li><li><a href="h5c3.LinkedListNode.html">LinkedListNode</a></li><li><a href="h5c3.Pool.html">Pool</a></li><li><a href="h5c3.Pooled.html">Pooled</a></li></ul><h3>Global</h3><ul><li><a href="global.html#$AEA">$AEA</a></li><li><a href="global.html#$AET">$AET</a></li><li><a href="global.html#$AST">$AST</a></li><li><a href="global.html#$CHK">$CHK</a></li><li><a href="global.html#$CNT">$CNT</a></li><li><a href="global.html#$CTX">$CTX</a></li><li><a href="global.html#$DOC">$DOC</a></li><li><a href="global.html#$EGA">$EGA</a></li><li><a href="global.html#$ESA">$ESA</a></li><li><a href="global.html#$GEC">$GEC</a></li><li><a href="global.html#$GEI">$GEI</a></li><li><a href="global.html#$GEN">$GEN</a></li><li><a href="global.html#$PUW">$PUW</a></li><li><a href="global.html#$VLD">$VLD</a></li><li><a href="global.html#h5c3">h5c3</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Sat Jul 20 2013 23:40:14 GMT-0700 (MST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
